(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{684:function(t,e,n){},685:function(t,e,n){},686:function(t,e,n){},824:function(t,e,n){"use strict";var o=n(684);n.n(o).a},825:function(t,e,n){"use strict";var o=n(685);n.n(o).a},826:function(t,e,n){"use strict";var o=n(686);n.n(o).a},863:function(t,e,n){"use strict";n.r(e);n(35);var o={data:function(){return{content:null,text:"我input中的内容，我input中的内容，我input中的内容。"}},mounted:function(){this.content=this.$refs.content}},c=(n(824),n(50)),s=Object(c.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"copy-directive"},[n("main",[n("h3",[t._v("1.复制元素节点")]),t._v(" "),n("div",[n("div",{ref:"content",staticClass:" copy-directive__content red",attrs:{id:"content"}},[n("p",[t._v("我是红色的内容")]),t._v(" "),n("p",[t._v("我是红色的内容")]),t._v(" "),n("p",[t._v("我是红色的内容")]),t._v(" "),n("p",[t._v("我是红色的内容")]),t._v(" "),n("p",[t._v("我是红色的内容")])])]),t._v(" "),n("el-button",{directives:[{name:"copy",rawName:"v-copy",value:t.content,expression:"content"}],attrs:{type:"primary"}},[t._v("点击复制红色内容")])],1),t._v(" "),n("section",[n("h3",[t._v("2.复制文本")]),t._v(" "),n("div",{staticClass:"copy-directive__content"},[n("el-input",{attrs:{placeholder:"请输入要复制的内容"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),t._v(" "),n("el-button",{directives:[{name:"copy",rawName:"v-copy",value:t.text,expression:"text"}],attrs:{type:"primary"}},[t._v("点击复制输入框中的内容")])],1)])},[],!1,null,"481dfc6e",null).exports,a={props:["content"],methods:{handleCopyNode:function(t){var e=window.getSelection();e.rangeCount>0&&e.removeAllRanges();var n=document.createRange();n.selectNodeContents(t),e.addRange(n);var o=document.execCommand("Copy");n.collapse(!1),o?this.$message.success("复制成功"):this.$message.error("复制失败")},handleCopy:function(){if(this.content)if(1===this.content.nodeType)this.handleCopyNode(this.content);else if("string"==typeof this.content){var t=document.createElement("p");t.innerText=this.content,document.body.appendChild(t),this.copyNode(t),document.body.removeChild(t)}else this.$message.warning("没有可以复制的内容");else this.$message.warning("没有要复制的内容")}}},i={components:{Copy:Object(c.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-button",{attrs:{type:"primary"},on:{click:this.handleCopy}},[this._v("复制")])],1)},[],!1,null,null,null).exports},data:function(){return{text:"我是文本我是文本我是文本我是文本我是文本我是文本",content:null}},mounted:function(){this.content=this.$refs.content}},r=(n(825),Object(c.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"copy-comp"},[n("section",[n("div",{ref:"content",staticClass:"content"},[n("h3",[t._v("要复制的内容")]),t._v(" "),n("p",{staticStyle:{"background-color":"yellow"}},[t._v("第一行内容111")]),t._v(" "),n("img",{attrs:{src:"https://picsum.photos/200/200/?random",alt:""}}),t._v(" "),n("p",[t._v("第二行内容222")]),t._v(" "),n("p",[t._v("第三行内容333")])]),t._v(" "),n("copy",{attrs:{content:t.content}})],1),t._v(" "),n("br"),t._v(" "),n("section",[n("p",[t._v(t._s(t.text))]),t._v(" "),n("copy",{attrs:{content:t.text}})],1)])},[],!1,null,"9792f344",null).exports),l={data:function(){return{content:null}},mounted:function(){this.content=this.$refs.content},methods:{handleCopy:function(){var t=this,e=function(e){var n=window.getSelection();n.rangeCount>0&&n.removeAllRanges();var o=document.createRange();o.selectNode(e),n.addRange(o),console.log(o),document.execCommand("Copy"),o.collapse(!1),t.$message.success("复制成功")};if(this.content)if(1===this.content.nodeType)e(this.content);else if("string"==typeof this.content){var n=document.createElement("p");n.innerText=this.content,document.body.appendChild(n),e(n),document.body.removeChild(n)}else this.$message.warning("没有可以复制的内容");else this.$message.warning("没有要复制的内容")}}},v=(n(826),{name:"Copy",components:{Directive:s,Comp:r,Bug:Object(c.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("p",[t._v("使用的时候发现在一定条件下会把触发复制的按钮也复制下来。这种情况需要满足以下条件：")]),t._v(" "),n("p",[t._v("1.复制按钮紧挨着要复制的内容")]),t._v(" "),n("p",[t._v("2.复制按钮后边也紧挨着一个相邻兄弟元素")]),t._v(" "),n("p",[t._v("3.复制按钮带有.el-button样式")]),t._v(" "),n("br"),t._v(" "),n("div",{ref:"content",staticClass:"copy-bug"},[n("p",[t._v("我是要复制的内容，紧挨着我的按钮也会被复制")]),t._v(" "),n("p",[t._v("我是要复制的内容，紧挨着我的按钮也会被复制")])]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleCopy}},[t._v("点我复制")]),t._v(" "),n("p",[t._v("我是紧挨着复制按钮的相邻兄弟元素")]),t._v(" "),n("br"),t._v(" "),n("p",[t._v("复制的时候会创建一个range对象，输出这个range对象，发现startContainer和endContaniner是要复制的元素的父元素。这样是不是可以简单理解为复制按钮也包含在这两个边界点中")]),t._v(" "),n("br"),t._v(" "),t._m(0),t._v(" "),t._m(1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("\n    解决方法1.\n    "),e("span",[this._v("复制时创建一个div，将要复制的内容包裹起来")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("\n    解决方法2.\n    "),e("span",[this._v("将复制使用的selectNode()方法更换为selectNodeContents()")])])}],!1,null,"7cac897b",null).exports},data:function(){return{activeName:"directive"}}}),u=Object(c.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"指令方式",name:"directive"}},[n("Directive")],1),t._v(" "),n("el-tab-pane",{attrs:{label:"组件方式",name:"component"}},[n("comp")],1),t._v(" "),n("el-tab-pane",{attrs:{label:"bug",name:"bug"}},[n("bug")],1)],1)],1)},[],!1,null,null,null).exports;n.d(e,"default",function(){return u})}}]);