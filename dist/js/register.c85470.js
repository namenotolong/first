(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{620:function(e,t,a){},621:function(e,t,a){},749:function(e,t,a){"use strict";var r=a(620);a.n(r).a},750:function(e,t,a){"use strict";var r=a(621);a.n(r).a},904:function(e,t,a){"use strict";a.r(t);var r=a(122),n=a.n(r),o=a(182),c=a.n(o),s=a(77),u={data:function(){var e=this;return{registerLoading:!1,captchaLoading:!1,captchaButtonText:"获取验证码",accountInfo:{username:"",password:"",checkPassword:"",phone:"",captcha:""},accountRules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(t,a,r){""===a?r(new Error("请输入密码")):/\d/.test(a)&&/[a-zA-Z]/.test(a)?(""!==e.accountInfo.checkPassword&&e.$refs.form.validateField("checkPassword"),r()):r(new Error("密码至少要包含数字和字母"))},trigger:"blur"},{min:6,max:20,message:"密码长度为6~20位",trigger:"blur"}],checkPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.accountInfo.password?r(new Error("两次填写的密码不一致")):r()},trigger:"blur"}],phone:[{required:!0,message:"请填写手机号",trigger:"blur"},{pattern:/^1[345789]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}],captcha:[{required:!0,message:"请填写验证码",trigger:"blur"}]}}},methods:{setDefaultCaptchaButton:function(e){clearInterval(e),this.captchaLoading=!1,this.captchaButtonText="获取验证码"},validPhone:function(e){return!!e.match(/^1[345789]\d{9}$/)||(this.$message.error("请填写正确的手机号！"),!1)},getCaptcha:function(){var e=this;return c()(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validPhone(e.accountInfo.phone)){t.next=2;break}return t.abrupt("return");case 2:return e.captchaLoading=!0,a=60,r=null,r=setInterval(function(){--a>0?e.captchaButtonText="获取验证码("+a+"s)":e.setDefaultCaptchaButton(r)},1e3),t.next=8,s.a.account.getCaptcha({phone:e.accountInfo.phone});case 8:e.$message.success("验证码已发送至手机"+e.accountInfo.phone+"，请注意查收！");case 9:case"end":return t.stop()}},t,e)}))()},handleRegister:function(){var e,t=this;this.registerLoading=!0,this.$refs.form.validate((e=c()(n.a.mark(function e(a){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=7;break}return e.next=3,s.a.account.register(t.accountInfo);case 3:t.$message.success("注册成功！"),t.$store.dispatch("Login",{username:t.accountInfo.username,password:t.accountInfo.password}).then(function(){t.$router.replace("/"),t.registerLoading=!1}),e.next=9;break;case 7:t.$message.warning("请按正确格式填写信息"),t.registerLoading=!1;case 9:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))}}},i=(a(749),a(750),a(50)),l=Object(i.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register"},[a("p",{staticClass:"register__header"},[e._v("账号注册")]),e._v(" "),a("el-form",{ref:"form",staticClass:"register__body",attrs:{model:e.accountInfo,rules:e.accountRules,"auto-complete":"on","label-width":"80px"}},[a("el-form-item",{attrs:{label:"账号",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.accountInfo.username,callback:function(t){e.$set(e.accountInfo,"username",t)},expression:"accountInfo.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.accountInfo.password,callback:function(t){e.$set(e.accountInfo,"password",t)},expression:"accountInfo.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.accountInfo.checkPassword,callback:function(t){e.$set(e.accountInfo,"checkPassword",t)},expression:"accountInfo.checkPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请填写手机号码"},model:{value:e.accountInfo.phone,callback:function(t){e.$set(e.accountInfo,"phone",t)},expression:"accountInfo.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"captcha"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入短信验证码"},model:{value:e.accountInfo.captcha,callback:function(t){e.$set(e.accountInfo,"captcha",t)},expression:"accountInfo.captcha"}})],1),e._v(" "),a("el-col",{attrs:{span:10,offset:2}},[a("el-button",{staticStyle:{width:"100%"},attrs:{disabled:e.captchaLoading},on:{click:e.getCaptcha}},[e._v(e._s(e.captchaButtonText))])],1)],1)],1),e._v(" "),a("el-form-item",[a("el-col",{attrs:{span:11}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.registerLoading},on:{click:e.handleRegister}},[e._v("注册")])],1),e._v(" "),a("el-col",{attrs:{span:11,offset:2}},[a("router-link",{attrs:{to:"/account/login"}},[e._v("使用已有账号登录")])],1)],1)],1)],1)},[],!1,null,"4fc672d1",null).exports;a.d(t,"default",function(){return l})}}]);