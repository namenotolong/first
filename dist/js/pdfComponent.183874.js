(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{697:function(e,t,n){},698:function(e,t,n){},846:function(e,t,n){"use strict";var a=n(697);n.n(a).a},847:function(e,t,n){"use strict";var a=n(698);n.n(a).a},871:function(e,t,n){"use strict";n.r(t);var a=n(258),i=n.n(a),l=n(606),o=n.n(l),r=n(609),c=n.n(r),s=n(691),d=function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;return n*(e/=a)*Math.pow(e,i)+t},u=function(e){return e===window?window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop:e.scrollTop},f=function(e,t){e===window?(document.body.scrollTop=t,document.documentElement.scrollTop=t):e.scrollTop=t},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=Date.now(),l=u(e),o=t-l,r=function r(){var c=Date.now()-i,s=d(c,l,o,n);f(e,s),c<n?window.requestAnimationFrame(r):(f(e,t),a())};r()};o.a.GlobalWorkerOptions.workerSrc=c.a;var v={props:{sourceType:{validator:function(e){return["url","base64"].includes(e)}},url:{type:String,default:""},data:{type:String,default:""},scale:{type:String,default:"page-actual"},pagination:{type:Boolean,default:!0}},data:function(){return{fileLoading:!1,cmapUrl:"pdfjs-dist/cmaps/",cmapPacked:!0,searchText:"",totalPage:0,scaleMode:this.scale,pdfLinkService:null,pdfFindController:null,pdfViewer:null,scaleOptions:[{label:"自动缩放",value:"auto"},{label:"实际大小",value:"page-actual"},{label:"适合页面",value:"page-fit"},{label:"适合页宽",value:"page-width"},{label:"50%",value:"0.5"},{label:"75%",value:"0.75"},{label:"100%",value:"1"},{label:"125%",value:"1.25"},{label:"150%",value:"1.5"},{label:"200%",value:"2"},{label:"300%",value:"3"},{label:"400%",value:"4"}]}},watch:{searchText:function(e){this.handleSearch(e)}},mounted:function(){this.initPdf(),this.loadFile()},methods:{decodeBase64:function(e){var t="";if(e.indexOf(";base64,")>-1){var n=e.indexOf(";base64,")+";base64,".length;t=e.substring(n).replace(/[\r\n]/g,"")}else t=e.replace(/[\r\n]/g,"");return window.atob(t)},initPdf:function(){var e=this;this.pdfLinkService=new s.PDFLinkService,this.pdfFindController=new s.PDFFindController({linkService:this.pdfLinkService}),this.pdfViewer=new s.PDFViewer({container:this.$refs.container,linkService:this.pdfLinkService,findController:this.pdfFindController}),this.pdfLinkService.setViewer(this.pdfViewer),document.addEventListener("pagesinit",function(){e.pdfViewer.currentScaleValue=e.scaleMode})},loadFile:function(){var e=this;this.fileLoading=!0;var t={cMapUrl:this.cmapUrl,cMapPacked:this.cmapPacked};"url"===this.sourceType?t.url=this.url:"base64"===this.sourceType&&(t.data=this.decodeBase64(this.data)),o.a.getDocument(t).promise.then(function(t){e.totalPage=t.numPages,e.renderPage(t),e.fileLoading=!1}).catch(function(){e.$message.error("文件加载失败！"),e.fileLoading=!1})},renderPage:function(e){this.pdfViewer.setDocument(e),this.pdfLinkService.setDocument(e,null)},handleSearch:function(e){this.pdfFindController.executeCommand("find",{query:e})},handleChangeScale:function(e){this.pdfViewer.currentScaleValue=this.scaleMode},handlePaginaiton:function(e){var t=document.getElementById("pdfViewer").getElementsByClassName("page"),n=i()(t).find(function(t){return t.dataset.pageNumber===String(e)}).offsetTop;p(document.querySelector(".pdf__container"),n,500)}}},h=(n(718),n(846),n(50)),g={name:"PdfComponent",components:{Pdf:Object(h.a)(v,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pdf"},[n("div",{staticClass:"pdf__toolbar"},[n("div",{staticClass:"left"},[n("el-select",{attrs:{size:"mini"},on:{change:e.handleChangeScale},model:{value:e.scaleMode,callback:function(t){e.scaleMode=t},expression:"scaleMode"}},e._l(e.scaleOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("div",{staticClass:" middle"}),e._v(" "),n("div",{staticClass:"right"},[n("el-pagination",{attrs:{layout:"prev, pager, next,jumper","page-size":1,total:e.totalPage,background:"",small:""},on:{"current-change":e.handlePaginaiton}})],1)]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fileLoading,expression:"fileLoading"}],ref:"container",staticClass:"pdf__container",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"文件加载中"}},[n("div",{staticClass:"pdfViewer",attrs:{id:"pdfViewer"}})])])},[],!1,null,"72eaf910",null).exports},data:function(){return{}}},m=(n(847),Object(h.a)(g,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pdf-component"},[t("pdf",{attrs:{sourceType:"url",url:"http://www.xdocin.com/xdoc?_key=t7t7z6j54vezfdnwptijcmo63i&_func=down&_dir=math.pdf"}})],1)},[],!1,null,"29c9da8c",null).exports);n.d(t,"default",function(){return m})}}]);